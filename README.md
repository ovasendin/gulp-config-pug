# gulp-config-pug

```html
git clone https://github.com/ovasendin/gulp-config-pug.git
```

#### Gulp конфигурация для PUG верстки

- Шаблонизатор PUG + `@zoxon/emitty`
- Препроцессор SASS/SCSS
- Автопрефиксер + минимизация CSS
- Объединение @media запросов
- ~~Настраиваемое сжатие изображений~~
- ~~Создание .webp изображений~~
- Создание SVG спрайта

#### Некоторые плагины

- `@zoxon/emitty` - PUG | позволяет компилировать только те `pug`-файлы, которые были изменены
- `gulp-plumber` - PUG, SASS | предотвращает прерывание `watch` из-за ошибок gulp-плагинов
- `browserify` - JS | позволяет использовать модули при написании javascript
- `babelify` - JS | работает вместе с `browserify`, преобразует JS-код в старый формат для браузеров
- `vinyl-source-stream`, `vinyl-buffer` - JS | позволяют продолжить работать с gulp-плагинами после использования `browserify` (в этой сборке нужны для `gulp-sourcemaps` и `gulp-uglify`).
- `gulp-changed` - IMG | переносит только изменённые файлы

#### Команды

- `npm i` - установка пакетов
- `npm run dev` - запуск проекта (watch)
- `npm run build:dev` - сборка проекта (dev)
- `npm run build:prod` - сборка проекта (prod)

#### Нужно добавить (заметки)

- **Линтеры и поддержку ES6**:
- ~~`@babel`~~ - добавлено
- `eslint` + `airbnb`
- `pug-lint`
- `stylelint`

#### Требуются расширения для VS Code

- `EditorConfig for VS Code`
- `pug (jade) formatter` - форматирование PUG

### Заметки

**Проблема**: при удалении файлов из рабочей папки `app` во время процесса `watch`, эти файлы **не удаляются** из папки `build`. Исправить это нормальным способом у меня пока не получилось. Использовал `gulp-changed` для добавления новых файлов (событие `add`, используется в папках `images` и `svg`). На события `change` и `unlink` сделал полное удаление папки. Это создаёт трудности, если в `images` или `svg` много изображений, но лучшего решения пока не нашёл. Папка `fonts` тоже удаляется полностью на любое событие, но для неё это не критично. Надо как-то удалять только тот файл, который был изменён/удалён.

**imagemin**: для сжатия изображений необходимы плагины конкретных версий:

- `imagemin@^7.1.0`
- `imagemin-webp@^6.0.0`
